---
title: "Analysis of Residential Real Esatate Data From Connecticut"
author: "Siling Guo, Megan Joseph, John Sawicz"
thanks: "Project repository available at: [https://github.com/meganajoseph/167r_project](https://github.com/meganajoseph/167r_project)."
date: today
date-format: long
abstract: ""
format: pdf
editor: visual
bibliography: references.bib
number-sections: true
---

# Introduction

# Data

```{r}
#| include: false
#| warning: false
#| message: false

# import libraries
library(tidyverse)
library(ggplot2)
# import data
real_estate <- read.csv("Real_Estate_Sales_2001-2023_GL.csv")

# clean data
# take columns we want
real_estate_simp <- real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type") %>%
  filter(!is.na(List.Year) & List.Year != "" & 
           !is.na(Town) & Town != "" & 
           !is.na(Assessed.Value) & Assessed.Value != "" & 
           !is.na(Sale.Amount) & Sale.Amount != "" & 
           !is.na(Sales.Ratio) & Sales.Ratio != "" & 
           !is.na(Property.Type) & Property.Type != "" &
           !is.na(Residential.Type) & Residential.Type!="" ) %>%
  filter( Town == "Stamford" | Town == "Westport" | Town == "Cheshire" | Town == "Sprague")

# drop duplicates
real_estate_dropped <- real_estate_simp[!duplicated(real_estate_simp), ]

# check the unique entries in Property Type column
unique(real_estate_dropped$Property.Type) 
# want to remove all of the irrelevant property types to our study (residential only)
cleaned_real_estate <- real_estate_dropped[!real_estate_dropped$Property.Type %in% c("Industrial", "Commercial", "Vacant Land", "Public Utility", ""), ]
# check that the irrelevant types are removed
unique(cleaned_real_estate$Property.Type)

# make sale.ratio numeric
cleaned_real_estate$Sales.Ratio <- as.numeric(cleaned_real_estate$Sales.Ratio)
```

The data we used for this analysis is Real Estate Sales data from 2001-2023 from the State of Connecticut's Office of Policy and Management. The sale price of each property is at least \$2,000. Each row is a property which contains information of the town, address, date sold, property type (residential, apartment, commercial, industrial or vacant land), sale price, assessed value, and latitude and longitude coordinates. For the purposes of this analysis, we mainly focus on residential properties and the columns town, property type, sale price, assessed value, and coordinates. Additionally, we picked four cities to focus on: Stamford, Westport, Cheshire, and Sprague. This was done because of the large number of data points and to investigate any differences in towns with varying levels of median income. Westport, CT has the highest median income at \$250,001, then we picked Cheshire, CT at \$150,787 for upper middle, Stamford, CT for lower middle, and Sprague, CT for the lowest [@Data_Commons].

## Data Cleaning

Many of the data points were missing or were empty characters, so we dropped those rows. Since our goal is centered on residential properties, we filtered out rows that were not residential. Additionally, the Sales.Ratio column needed to be transformed into a numeric value.

## Descriptive Statistics

We analyzed the mean, minimum value, maximum value, first quantile, median, and third quantile of the Sale.Amount, Assessed.Value, and Sales.Ratio columns. The information is summarized in the table below.

```{r}
#| include: false
#| warning: false
#| message: false

# descriptive statistics over entire data set
mean_sp <- mean(cleaned_real_estate$Sale.Amount)
mean_av <- mean(cleaned_real_estate$Assessed.Value)
mean_sr <- mean(cleaned_real_estate$Sales.Ratio)

# min
min_sp <- min(cleaned_real_estate$Sale.Amount)
min_av <- min(cleaned_real_estate$Assessed.Value)
min_sr <- min(cleaned_real_estate$Sales.Ratio)

# max
max_sp <- max(cleaned_real_estate$Sale.Amount)
max_av <- max(cleaned_real_estate$Assessed.Value)
max_sr <- max(cleaned_real_estate$Sales.Ratio)

# 1st q
first_quantile_sp <- quantile(cleaned_real_estate$Sale.Amount, probs = 0.25)
first_quantile_av <- quantile(cleaned_real_estate$Assessed.Value, probs = 0.25)
first_quantile_sr <- quantile(cleaned_real_estate$Sales.Ratio, probs = 0.25)

# median
median_sp <- median(cleaned_real_estate$Sale.Amount)
median_av <- median(cleaned_real_estate$Assessed.Value)
median_sr <- median(cleaned_real_estate$Sales.Ratio)

# 3rd q
third_quantile_sp <- quantile(cleaned_real_estate$Sale.Amount, probs = 0.75)
third_quantile_av <- quantile(cleaned_real_estate$Assessed.Value, probs = 0.75)
third_quantile_sr <- quantile(cleaned_real_estate$Sales.Ratio, probs = 0.75)
```

| Column | Mean | Minimum | Maximum | 1st Quartile | Median | 3rd Quartile |
|----|----|----|----|----|----|----|
| Sale Amount | `r signif(mean_sp, digits=2)` | `r min_sp` | `r max_sp` | `r round(first_quantile_sp, 2)` | `r round(median_sp, 2)` | `r round(third_quantile_sp, 2)` |
| Assessed Value | `r signif(mean_av, digits=2)` | `r min_av` | `r signif(max_av, 2)` | `r signif(first_quantile_av, digits=2)` | `r signif(median_av, digits=2)` | `r signif(third_quantile_av, digits=2)` |
| Sales Ratio | `r round(mean_sr, 2)` | `r min_sr` | `r round(max_sr, 2)` | `r round(first_quantile_sr, 2)` | `r round(median_sr, 2)` | `r round(third_quantile_sr, 2)` |

# Graphs

# Advanced Analysis

# Conclusion

# References
