# import data
real_estate <- read.csv("Real_Estate_Sales_2001-2023_GL.csv")
View(real_estate)
# import libraries
library(tidyverse)
# take columns we want
real_estate_simp %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type")
# take columns we want
real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type")
real_estate
View(real_estate)
# take columns we want
real_estate_simp <- real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type")
View(real_estate_simp)
duplicated(real_estate_simp)
unique(duplicated(real_estate_simp))
# clean data
real_estate_simp[duplicatd(real_estate_simp), ]
# clean data
real_estate_simp[duplicated(real_estate_simp), ]
# clean data
# drop duplicates
real_estate_dropped <- real_estate_simp[duplicated(real_estate_simp), ]
git pull
real_estate_simp[real_estate_simp$Town == "Hartford"]
# import libraries
library(tidyverse)
# import data
real_estate <- read.csv("Real_Estate_Sales_2001-2023_GL.csv")
# take columns we want
real_estate_simp <- real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type") %>%
filter(!is.na(List.Year) & List.Year != "" &
!is.na(Town) & Town != "" &
!is.na(Assessed.Value) & Assessed.Value != "" &
!is.na(Sale.Amount) & Sale.Amount != "" &
!is.na(Sales.Ratio) & Sales.Ratio != "" &
!is.na(Property.Type) & Property.Type != "" &
!is.na(Residential.Type) & Residential.Type!="" ) %>%
filter( Town == "Hartford" | Town == "Westport" | Town == "Cheshire" | Town == "Sprague")
# clean data
# drop duplicates
real_estate_dropped <- real_estate_simp[duplicated(real_estate_simp), ]
# check the unique entries in Property Type column
unique(real_estate_dropped$Property.Type)
# import data
real_estate <- read.csv("Real_Estate_Sales_2001-2023_GL.csv")
# take columns we want
real_estate_simp <- real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type") %>%
filter(!is.na(List.Year) & List.Year != "" &
!is.na(Town) & Town != "" &
!is.na(Assessed.Value) & Assessed.Value != "" &
!is.na(Sale.Amount) & Sale.Amount != "" &
!is.na(Sales.Ratio) & Sales.Ratio != "" &
!is.na(Property.Type) & Property.Type != "" &
!is.na(Residential.Type) & Residential.Type!="" ) %>%
filter( Town == "Hartford" | Town == "Westport" | Town == "Cheshire" | Town == "Sprague")
# clean data
# drop duplicates
real_estate_dropped <- real_estate_simp[duplicated(real_estate_simp), ]
# check the unique entries in Property Type column
unique(real_estate_dropped$Property.Type)
# want to remove all of the irrelevant property types to our study (residential only)
cleaned_real_estate <- real_estate_dropped[!real_estate_dropped$Property.Type %in% c("Industrial", "Commercial", "Vacant Land", "Public Utility", ""), ]
# check that the irrelevant types are removed
unique(cleaned_real_estate$Property.Type)
duplicated(real_estate_simp)
# import libraries
library(tidyverse)
# import data
real_estate <- read.csv("Real_Estate_Sales_2001-2023_GL.csv")
# take columns we want
real_estate_simp <- real_estate %>% select("List.Year", "Town", "Assessed.Value", "Sale.Amount", "Sales.Ratio", "Property.Type", "Residential.Type") %>%
filter(!is.na(List.Year) & List.Year != "" &
!is.na(Town) & Town != "" &
!is.na(Assessed.Value) & Assessed.Value != "" &
!is.na(Sale.Amount) & Sale.Amount != "" &
!is.na(Sales.Ratio) & Sales.Ratio != "" &
!is.na(Property.Type) & Property.Type != "" &
!is.na(Residential.Type) & Residential.Type!="" ) %>%
filter( Town == "Hartford" | Town == "Westport" | Town == "Cheshire" | Town == "Sprague")
# clean data
# drop duplicates
real_estate_dropped <- real_estate_simp[!duplicated(real_estate_simp), ]
# check the unique entries in Property Type column
unique(real_estate_dropped$Property.Type)
# want to remove all of the irrelevant property types to our study (residential only)
cleaned_real_estate <- real_estate_dropped[!real_estate_dropped$Property.Type %in% c("Industrial", "Commercial", "Vacant Land", "Public Utility", ""), ]
# check that the irrelevant types are removed
unique(cleaned_real_estate$Property.Type)
View(real_estate_simp)
View(real_estate)
View(real_estate_simp)
# descriptive statistics over entire data set
mean_sp <- meane(cleaned_real_estate$Sale.Amount)
# descriptive statistics over entire data set
mean_sp <- mean(cleaned_real_estate$Sale.Amount)
mean_av <- mean(cleaned_real_estate$Assessed.Value)
mean_sr <- mean(cleaned_real_estate$Sales.Ratio)
class(cleaned_real_estate$Sales.Ratio)
# make sale.ratio numeric
cleaned_real_estate$Sales.Ratio <- as.numeric(cleaned_real_estate$Sales.Ratio)
class(cleaned_real_estate$Sales.Ratio)
# descriptive statistics over entire data set
mean_sp <- mean(cleaned_real_estate$Sale.Amount)
mean_av <- mean(cleaned_real_estate$Assessed.Value)
mean_sr <- mean(cleaned_real_estate$Sales.Ratio)
# max
max_sp <- max(cleaned_real_estate$Sale.Amount)
max_av <- max(cleaned_real_estate$Assessed.Value)
max_sr <- max(cleaned_real_estate$Sales.Ratio)
mat <- matrix(c(1, 2, 3, 4, 5, 6, 7, 8, 9), nrow=3)
mat <- matrix(nrow=3, ncol=3)
?sd
?list
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (col1 in 1:ncol((mat)-1)) {
for (col2 in 1:ncol((mat)-1)) {
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[col1, col2] <- curr_cov
corr[col1, col2] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (col1 in 1:ncol((mat)-1)) {
for (col2 in 1:ncol((mat)-1)) {
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[col1, col2] <- curr_cov
corr[col1, col2] <- curr_corr
}
}
return(list(cov, corr))
}
mat <- matrix(c(1, 2, 3, 4, 5, 6, 7, 8, 9), nrow=3)
cov_corr(mat)
View(mat)
sum(((mat[, 1] - mean(mat[, 1]))*(mat[, 2] - mean(mat[, 2]))) / (nrow(mat)))
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol((mat)-1)) {
col1 <- mat[, i]
for (j in 1:ncol((mat)-1)) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[col1, col2] <- curr_cov
corr[col1, col2] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol((mat))) {
col1 <- mat[, i]
for (j in 1:ncol((mat))) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[col1, col2] <- curr_cov
corr[col1, col2] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[col1, col2] <- curr_cov
corr[col1, col2] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (sd(col1)*sd(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / N)
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)))
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / N)
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum(((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat))-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / N)
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / N-1)
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / N)
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- mean(x)
sigma <- sqrt(sum((x - mu)**2) / (N-1))
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
std <- function(x){
N <- length(x)
mu <- sum(x) / N
sigma <- sqrt(sum((x - mu)**2) / (N-1))
return(sigma)
}
cov_corr <- function(mat) {
cov <- matrix(nrow=ncol(mat), ncol=ncol(mat))
corr <- matrix(nrow=ncol(mat), ncol=ncol(mat))
for (i in 1:ncol(mat)) {
col1 <- mat[, i]
for (j in 1:ncol(mat)) {
col2 <- mat[, j]
curr_cov <- sum((col1 - mean(col1))*(col2 - mean(col2))) / (nrow(mat)-1)
curr_corr <- curr_cov / (std(col1)*std(col2))
cov[i, j] <- curr_cov
corr[i, j] <- curr_corr
}
}
return(list(cov, corr))
}
cov_corr(mat)
fema_hi <- read.csv("math_261a/paper2_data/NRI_HazardInfo.csv")
fema_data <- read.csv("math_261a/paper2_data/NRI_Table_CensusTracts_California.csv")
fema_hi <- read.csv("C:\\Users\\megan\\OneDrive\\Documents\\math_261a\\paper2_data\\NRI_HazardInfo.csv")
fema_data <- read.csv("C:\\Users\\megan\OneDrive\\Documents\\math_261a\\paper2_data\\NRI_Table_CensusTracts_California.csv")
fema_dd <- read.csv("C:\\Users\\megan\\OneDrive\\Documents\\math_261a\\paper2_data\\NRIDataDictionary.csv")
fema_data <- read.csv("C:\\Users\\megan\\OneDrive\\Documents\\math_261a\\paper2_data\\NRI_Table_CensusTracts_California.csv")
View(fema_data)
View(fema_dd)
fema_data$SOVI_SCORE
lm(EAL_SCORE ~ RESL_SCORE + DRGT_EXPT + ERQK_EXPT + WFIR_EXPT, data=fema_data)
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_SCORE)
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, log(fema_data$EAL_SCORE))
plot(log(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT), fema_data$EAL_SCORE)
plot(fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_SCORE)
plot(fema_data$RESL_SCORE, fema_data$EAL_SCORE)
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_VALT)
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, log(fema_data$EAL_VALT))
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_VALT)
plot(fema_data$RESL_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, sqrt(fema_data$EAL_VALT))
plot(fema_data$RESL_VALUE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_VALT)
plot(fema_data$RESL_VALUE + fema_data$SOVI_SCORE, fema_data$EAL_VALT)
plot(fema_data$RESL_VALUE + fema_data$SOVI_SCORE + fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$EAL_VALT)
plot(fema_data$RESL_VALUE, fema_data$EAL_VALT)
plot(fema_data$DRGT_EXPT, fema_data$EAL_VALT)
plot(fema_data$DRGT_EXPT, fema_data$EAL_VALT**2)
plot(fema_data$DRGT_EXPT, exp(fema_data$EAL_VALT))
plot(fema_data$DRGT_EXPT, fema_data$EAL_VALT**2)
plot(fema_data$DRGT_EXPT, fema_data$EAL_VALT)
plot(log(fema_data$DRGT_EXPT), fema_data$EAL_VALT)
plot(fema_data$ERQK_EXPT, fema_data$EAL_VALT)
plot(fema_data$WFIR_EXPT, fema_data$EAL_VALT)
plot(fema_data$DRGT_EXPA, fema_data$EAL_VALT)
plot(fema_data$DRGT_EXP_AREA, fema_data$EAL_VALT)
plot(fema_data$DRGT_EXPA, log(fema_data$EAL_VALT))
plot(fema_data$DRGT_EXP_AREA, log(fema_data$EAL_VALT))
plot(fema_data$DRGT_EXPT, fema_data$RESL_VALUE)
plot(fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT, fema_data$RESL_VALUE)
plot(log(fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT), fema_data$RESL_VALUE)
plot(sqrt(fema_data$DRGT_EXPT + fema_data$ERQK_EXPT + fema_data$WFIR_EXPT), fema_data$RESL_VALUE)
?ggplot::barplot
?tidyverse::barplot
??barplot
?ggplot2::geom_bar
# graphs
ggplot(data=cleaned_real_estate, aes(Town)) +
geom_bar()
# visualize number of entries in each town
ggplot(data=cleaned_real_estate, aes(Town)) +
geom_bar() +
labs(x = "Town",
y = "Frequency",
title = "Number of observations for each town of interest")
# visualize number of entries in each town
ggplot(data=cleaned_real_estate, aes(Town)) +
geom_bar() +
labs(x = "Town",
y = "Frequency",
title = "Number of observations for each town of interest") +
theme_economist()
install.packages(ggthemr)
install.packages("ggthemr")
View(cleaned_real_estate)
# visualize number of entries in each residential type
ggplot(data=cleaned_real_estate, aes(Residential.Type)) +
geom_bar() +
labs(x = "Residential Type",
y = "Frequency",
title = "Number of observations for each residential type") +
theme_economist()
# visualize number of entries in each residential type
ggplot(data=cleaned_real_estate, aes(Residential.Type)) +
geom_bar() +
labs(x = "Residential Type",
y = "Frequency",
title = "Number of observations for each residential type") +
theme_economist()
# visualize number of entries in each residential type
ggplot(data=cleaned_real_estate, aes(Residential.Type)) +
geom_bar() +
labs(x = "Residential Type",
y = "Frequency",
title = "Number of observations for each residential type")
# visualize the distribution of sale price
ggplot(data=cleaned_real_estate, aes(Sale.Amount)) +
geom_histogram() +
labs(x = "Sale Price",
y = "Frequency",
title = "Distribution of sale price")
?geom_histogram
# visualize the distribution of sale price
ggplot(data=cleaned_real_estate, aes(Sale.Amount)) +
geom_histogram(bins=10) +
labs(x = "Sale Price",
y = "Frequency",
title = "Distribution of sale price")
# visualize the distribution of sale price
ggplot(data=cleaned_real_estate, aes(Sale.Amount)) +
geom_histogram(bins=20) +
labs(x = "Sale Price",
y = "Frequency",
title = "Distribution of sale price")
install.packages("data")
